<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WAY</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { /* ... كما هو ... */ }
        .container { /* ... كما هو ... */ }
        header { /* ... كما هو ... */ }
        .header-icon { /* ... كما هو ... */ }
        h1 { /* ... كما هو ... */ }

        .progress-slider-bar {
            width: 100%;
            margin: 15px 0 10px 0;
            padding: 0 7px;
            display: flex;
            align-items: center;
            gap: 8px;
            position: relative;
            flex-direction: row-reverse; /* عكس الاتجاه ليبدأ من اليمين */
        }
        .slider-labels { width: 28px; text-align: center; color: #2e7d52; font-weight: bold; }
        .slider {
            width: 100%;
            -webkit-appearance: none;
            appearance: none;
            height: 10px;
            background: #e0e0e0;
            border-radius: 7px;
            outline: none;
            position: relative;
            z-index: 1;
            direction: rtl; /* عكس السلايدر ليبدأ من اليمين */
        }
        .slider::-webkit-slider-runnable-track {
            height: 10px;
            background: linear-gradient(
                to left, /* الامتلاء من اليمين لليسار */
                #2e7d52 0,
                #2e7d52 var(--progress,0%),
                #e0e0e0 var(--progress,0%),
                #e0e0e0 100%
            );
            border-radius: 7px;
        }
        .slider::-webkit-slider-thumb { /* كما هو */ }
        .slider::-moz-range-track {
            height: 10px;
            background: linear-gradient(
                to left,
                #2e7d52 0,
                #2e7d52 var(--progress,0%),
                #e0e0e0 var(--progress,0%),
                #e0e0e0 100%
            );
            border-radius: 7px;
        }
        /* ... باقي التنسيقات ... */
    </style>
</head>
<body>
<audio id="click-audio" src="https://cdn.pixabay.com/audio/2022/11/16/audio_12bfa6f1e1.mp3"></audio>
<div class="container">
    <!-- ... -->
    <div class="progress-slider-bar">
        <div class="slider-labels left"><span id="max-question">10</span></div>
        <input type="range" min="1" max="10" value="1" class="slider" id="question-slider">
        <div class="slider-labels right"><span>1</span></div>
    </div>
    <!-- ... باقي الصفحة ... -->
</div>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // ... باقي المتغيرات كما هي ...
    questionSlider.addEventListener('input', function() {
        const displayed = getDisplayedQuestions();
        // عكس الترتيب: القيمة 1 تعني آخر سؤال، max تعني أول سؤال
        const newIndex = displayed.length - parseInt(this.value);
        if (displayed.length > 0 && newIndex >= 0 && newIndex < displayed.length && newIndex !== currentQuestionIndex) {
            currentQuestionIndex = newIndex;
            showQuestion();
            updateProgressAndSlider();
            updateStarButton();
        }
    });
    function showQuestion() {
        const displayedQuestions = getDisplayedQuestions();
        // ... (باقي الدالة كما هو) ...
        // تحديث مؤشر السؤال الحالي (عكس الترتيب)
        currentQ.textContent = displayedQuestions.length - currentQuestionIndex;
        totalQs.textContent = displayedQuestions.length;

        // عكس السلايدر
        questionSlider.max = displayedQuestions.length;
        questionSlider.value = displayedQuestions.length - currentQuestionIndex;
        // ... باقي الدالة ...
    }
    function updateProgressAndSlider() {
        const displayedQuestions = getDisplayedQuestions();
        let percent = 0;
        if (displayedQuestions.length > 0)
            percent = ((displayedQuestions.length - currentQuestionIndex) / displayedQuestions.length) * 100;
        questionSlider.max = displayedQuestions.length;
        questionSlider.value = displayedQuestions.length - currentQuestionIndex;
        maxQuestionLabel.textContent = displayedQuestions.length;
        questionSlider.style.setProperty('--progress', percent + '%');
    }
    // ... باقي الكود كما هو ...
});
</script>
</body>
</html>
